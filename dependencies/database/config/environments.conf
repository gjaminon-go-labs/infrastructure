#!/bin/bash
# Environment-specific configuration for database provisioning
# This file defines environment-specific settings and safety flags

# Database hosts per environment
declare -A DB_HOSTS=(
    ["tst"]="localhost"
    ["dev"]="localhost"
    ["qua"]="qua-db-server.internal"
    ["prd"]="prd-db-server.internal"
)

# Database ports per environment
declare -A DB_PORTS=(
    ["tst"]="5432"
    ["dev"]="5432"
    ["qua"]="5432"
    ["prd"]="5432"
)

# PostgreSQL superuser for administrative tasks
declare -A DB_ADMIN_USER=(
    ["tst"]="postgres"
    ["dev"]="postgres"
    ["qua"]="postgres"
    ["prd"]="postgres"
)

# Safety flags - only test environment allows drops
declare -A ALLOW_DROP=(
    ["tst"]="true"    # Only test allows drops for clean state
    ["dev"]="false"   # Never drop dev database
    ["qua"]="false"   # Never drop QA database
    ["prd"]="false"   # Never drop production database
)

# Environment descriptions for user prompts
declare -A ENV_DESCRIPTIONS=(
    ["tst"]="Test Environment (safe to reset)"
    ["dev"]="Development Environment"
    ["qua"]="Quality/Staging Environment"
    ["prd"]="Production Environment (CRITICAL)"
)

# Valid environments
VALID_ENVIRONMENTS=("tst" "dev" "qua" "prd")

# Function to validate environment
validate_environment() {
    local env=$1
    for valid_env in "${VALID_ENVIRONMENTS[@]}"; do
        if [[ "$env" == "$valid_env" ]]; then
            return 0
        fi
    done
    return 1
}